import{c as e,b as s,q as t,r,v as a,y as i,T as c,z as l,j as n,A as d}from"./index-vXRN0nb0.js";import{P as o}from"./popup-7fAACdWw.js";import{s as m}from"./common-DYHPXX_Z.js";import{e as h}from"./game-DqO2iwES.js";const p=()=>{const m=e(),p=s(),x=t((e=>e.user.info)),[v,w]=r.useState(!1),N=r.useRef(null),f=r.useRef(null),[b,y]=r.useState(!1),{isConnected:I}=a(),[M,k]=r.useState(0),[T,F]=r.useState(""),[R,z]=r.useState(!1),[S,C]=r.useState(!1),B=r.useRef(null),E=r.useRef(null),[L,H]=r.useState(5),[P,$]=r.useState("0.2158"),[_,A]=r.useState(""),U=r.useRef(null),D=r.useRef(null),G=r.useRef(null),[W,q]=r.useState(!1),[K,V]=r.useState("BTC"),[J,O]=r.useState({}),Q=e=>{if(x.ticket<=0)c.show({content:"Gas is Empty, please wait!",position:"top"});else if(!S){if(!W){const e=document.getElementById("douDong");e&&(e.play(),q(!0))}document.getElementById("race").play(),z(!0),C(!0),D.current=U.current,A(e)}};r.useEffect((()=>{if(R){clearTimeout(B.current),clearInterval(E.current),clearTimeout(G.current),clearInterval(N.current),B.current=setTimeout((async()=>{z(!1);const e=U.current-D.current;let s=e/D.current;s=s.toFixed(4),"0.0000"==s&&(s="0.0001"),0==e&&(s="0.0000"),$(s);let t=!1;"Rise"==_&&e>0&&(t=!0),"Fall"==_&&e<0&&(t=!0),0==e&&(t=!1);const r=await h({guessType:_,result:t?"Win":"Miss",symbol:K});if(0==r.code){const a={diff:e,prePrice:Number(D.current).toFixed(2),curPrice:Number(U.current).toFixed(2),visible:!0,percent:s,symbol:K,isRight:t};"ELF"==K&&(a.prePrice=Number(D.current).toFixed(4),a.curPrice=Number(U.current).toFixed(4)),O(a),G.current=setTimeout((()=>{m(i(r.data)),C(!1),A(""),O({visible:!1})}),2500)}else c.show({content:r.msg,position:"top"}),clearInterval(E.current),C(!1),A("")}),5500);let e=5;H(e),E.current=setInterval((()=>{e-=1,e=Math.max(0,e),H(e)}),1e3)}return()=>{clearInterval(E.current),clearInterval(G.current),clearTimeout(B.current)}}),[R]),r.useEffect((()=>{l().then((e=>{0==e.code&&m(i(e.data))}))}),[]),r.useEffect((()=>{if(null==x||x.is_New,x&&x.score){const e=x.score;if(e!=M){clearInterval(N.current);let s=M;N.current=setInterval((()=>{s+=Math.max(Math.round((e-M)/50),1),s>=e?(k(e),clearInterval(N.current)):k(s)}),50)}}return()=>clearInterval(N.current)}),[x]);const X=async()=>{try{const e=await d(!1,`${K}USDT`);let s=e.price.substring(0,8);return U.current=e.price,"BTC"==K&&(s=`${s.substring(0,2)},${s.substring(2)}`),F(s),e.price}catch(e){return console.error(e),(null==e?void 0:e.current)||0}};return r.useEffect((()=>(clearInterval(f.current),X(),f.current=setInterval((()=>{X()}),2e3),()=>clearInterval(f.current))),[K]),n.jsxs("div",{className:"home-page fadeIn",children:[n.jsxs("div",{className:"race-bg",children:[n.jsx("video",{src:"/assets/home/doudong.mp4",className:"doudong",muted:!0,id:"douDong",loop:!0}),n.jsx("video",{src:"/assets/home/race.mp4",className:"doudong",id:"race",muted:!b,style:{opacity:R?"1":0}}),n.jsxs("div",{className:"ybp-container "+(R?"ybp-container-active":""),children:[n.jsxs("div",{className:"ybp-inner",children:[n.jsxs("div",{className:"price-title",onClick:()=>{V("BTC"==K?"ELF":"BTC")},children:[n.jsxs("div",{className:"price-switch",children:[K," Price ",n.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3412",width:"16",height:"16",children:n.jsx("path",{d:"M917.333333 341.333333H106.666667a21.333333 21.333333 0 0 1 0-42.666666h759.166666l-134.253333-134.246667a21.333333 21.333333 0 0 1 30.173333-30.173333l170.666667 170.666666A21.333333 21.333333 0 0 1 917.333333 341.333333z m-624.913333 548.42a21.333333 21.333333 0 0 0 0-30.173333L158.166667 725.333333H917.333333a21.333333 21.333333 0 0 0 0-42.666666H106.666667a21.333333 21.333333 0 0 0-15.086667 36.42l170.666667 170.666666a21.333333 21.333333 0 0 0 30.173333 0z",fill:"#fff","p-id":"3413"})})]}),S?n.jsxs("span",{children:["$",n.jsx("span",{className:"token-price",children:T})]}):null]}),S?R?n.jsx(u,{}):n.jsxs("div",{className:"speed-wrapper",children:[parseFloat(P)>0?n.jsx("img",{className:"rotate-item-img",src:"/assets/home/up.png"}):0==parseFloat(P)?n.jsx("img",{className:"rotate-item-img",src:"/assets/home/right-arrow.png",alt:"arrow"}):n.jsx("img",{className:"rotate-item-img",src:"/assets/home/down.png",alt:"down"}),P.split("").map(((e,s)=>"."==e?n.jsx("div",{className:"dot",children:"."},s):"-"==e?null:n.jsx("div",{className:"ybpNumber-wrapper",children:e},s))),n.jsx("div",{className:"percent",children:"%"})]}):n.jsxs("div",{className:"price",children:["$",n.jsx("span",{children:T})]}),n.jsxs("div",{className:"chance",children:[n.jsx("img",{src:"/assets/home/gas.png",alt:"gas",width:16}),n.jsx("div",{className:"progress-wrapper",children:n.jsx("div",{className:"progress",style:{width:((null==x?void 0:x.ticket)||0)/.1+"%"}})}),n.jsxs("div",{className:"change-number",children:[null==x?void 0:x.ticket," / ",n.jsx("span",{children:"10"})]}),n.jsx("div",{className:"more",onClick:()=>p("/frens"),children:n.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5328",width:"12",height:"12",children:n.jsx("path",{d:"M749.6 466.4l-384-384-91.2 91.2L613.6 512l-339.2 338.4 91.2 91.2 384-384 44.8-45.6z","p-id":"5329",fill:"#bfbfbf"})})})]})]}),n.jsx(g,{userInfo:x})]})]}),n.jsxs("div",{className:"operation-btns",children:[n.jsxs("div",{className:"operation-title",children:["Guess the ",K," price in 5 seconds"]}),n.jsxs("div",{className:"btns",children:[n.jsx("div",{className:"btn-outLine "+(_&&"Fall"==_?"dark-outLine":""),children:n.jsxs("div",{className:"btn "+(_?"Rise"==_?"active-btn":"dark-btn":""),onClick:()=>Q("Rise"),children:[n.jsx("span",{children:"Rise"}),n.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"695",width:"18",height:"18",children:[n.jsx("path",{d:"M833.28 206.208v760.32l135.808 8.96v-904.96h-904.96l8.96 135.68z","p-id":"696"}),n.jsx("path",{d:"M64 975.616h108.672l715.008-715.008-99.584-99.584-715.008 715.008z","p-id":"697"}),n.jsx("path",{d:"M64 975.616h108.672l715.008-715.008-99.584-99.584-715.008 715.008z","p-id":"698"})]})]})}),n.jsx("div",{className:"btn-outLine "+(_&&"Rise"==_?"dark-outLine":""),children:n.jsxs("div",{className:"f-btn btn "+(_?"Fall"==_?"f-active-btn":"f-dark-btn":""),onClick:()=>Q("Fall"),children:[n.jsx("span",{children:"Fall"}),n.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"903",width:"18",height:"18",children:[n.jsx("path",{d:"M833.28 839.808l-769.28-8.96v144.64h905.088v-904.96l-135.68-9.088z","p-id":"904"}),n.jsx("path",{d:"M64 70.4l9.088 99.584 715.008 715.136 99.584-99.584-715.008-715.008z","p-id":"905"}),n.jsx("path",{d:"M64 70.4l9.088 99.584 715.008 715.136 99.584-99.584-715.008-715.008z","p-id":"906"})]})]})})]}),n.jsx("div",{className:"tktj",onClick:()=>p("/terms"),children:"Terms and Conditions"})]}),n.jsxs("div",{className:"main-content",children:[n.jsxs("div",{className:"top-btn",children:[n.jsx("div",{className:"top-btn-left",onClick:()=>y(!b),children:n.jsx("img",{src:`/assets/home/${b?"voice":"no-voice"}.png`,alt:"voice"})}),n.jsxs("div",{className:"top-btn-right",onClick:()=>{p(I?"/assets":"/wallet")},children:[n.jsx("img",{src:"/assets/home/wallet.png",width:18}),n.jsx("span",{children:"PortKey Wallet"})]})]}),S?n.jsxs("div",{className:"count-time",children:["00:0",L]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"score-section",children:n.jsxs("div",{className:"avail-score",children:[n.jsx("img",{src:"/assets/home/jb.png",alt:"jb",width:18}),n.jsx("span",{children:"Score"})]})}),n.jsx("div",{className:"score-center",children:M.toLocaleString()})]})]}),n.jsx(o,{visible:v,onMaskClick:()=>{w(!1)},bodyStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},className:"popup-rule",children:n.jsxs("div",{className:"popup-rule-content",children:[n.jsxs("div",{className:"popup-rule-title",children:[n.jsx("div",{children:"Rules"}),n.jsx("svg",{onClick:()=>w(!1),className:"close-svg",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5777",width:"18",height:"18",children:n.jsx("path",{d:"M597.795527 511.488347 813.564755 295.718095c23.833825-23.833825 23.833825-62.47489 0.001023-86.307691-23.832801-23.832801-62.47489-23.833825-86.307691 0L511.487835 425.180656 295.717583 209.410404c-23.833825-23.833825-62.475913-23.833825-86.307691 0-23.832801 23.832801-23.833825 62.47489 0 86.308715l215.769228 215.769228L209.410915 727.258599c-23.833825 23.833825-23.833825 62.47489 0 86.307691 23.832801 23.833825 62.473867 23.833825 86.307691 0l215.768205-215.768205 215.769228 215.769228c23.834848 23.833825 62.475913 23.832801 86.308715 0 23.833825-23.833825 23.833825-62.47489 0-86.307691L597.795527 511.488347z",fill:"#fff","p-id":"5778"})})]}),n.jsx("div",{className:"popup-rule-wrapper",children:n.jsxs("div",{className:"popup-rule-content",children:[n.jsxs("div",{className:"popup-rule-content-title",children:[n.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5414",width:"16",height:"16",children:n.jsx("path",{d:"M845.902988 0.000232H178.097244A177.864812 177.864812 0 0 0 0.000232 178.097244v667.805744a177.864812 177.864812 0 0 0 178.097012 178.097012h667.805744a177.864812 177.864812 0 0 0 178.097012-178.097012V178.097244A177.864812 177.864812 0 0 0 845.902988 0.000232zM512.000116 911.615445A75.929234 75.929234 0 1 1 587.929351 835.91841a77.090232 77.090232 0 0 1-75.929235 75.697035z m75.929235-340.172258v51.548287a75.929234 75.929234 0 0 1-151.858469 0v-114.938749a75.697035 75.697035 0 0 1 75.929234-75.929235A84.056217 84.056217 0 1 0 428.176099 348.299473a76.161434 76.161434 0 1 1-152.090669 0 235.914686 235.914686 0 1 1 311.843921 223.375913z",fill:"#fff","p-id":"5415"})}),"How to Earn",n.jsx("img",{src:"/assets/common/cat.webp",alt:"logo",width:16,height:16})]}),n.jsxs("ul",{children:[n.jsxs("li",{children:["Check in daily to get ",n.jsx("img",{src:"/assets/common/cat.webp",alt:"logo",width:16,height:16})," and an additional ",n.jsx("img",{src:"/assets/common/cat.webp",alt:"logo",width:16,height:16})," if you do it consecutively!"]}),n.jsxs("li",{children:["Grow your cat to harvest ",n.jsx("img",{src:"/assets/common/cat.webp",alt:"logo",width:16,height:16})," rewards!"]}),n.jsxs("li",{children:["Check in daily to receive ",n.jsx("img",{src:"/assets/common/ticket.webp",alt:"logo",width:16,height:16})," and earn more ",n.jsx("img",{src:"/assets/common/cat.webp",alt:"logo",width:16,height:16}),"."]}),n.jsxs("li",{children:["Invite frens to earn more ",n.jsx("img",{src:"/assets/common/cat.webp",alt:"logo",width:16,height:16}),"."]}),n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3174","data-spm-anchor-id":"a313x.search_index.0.i5.2b3c3a81TUgFeH",width:"16",height:"16",children:n.jsx("path",{d:"M42.666667 896l938.666667 0-469.333333-810.666667-469.333333 810.666667zM554.666667 768l-85.333333 0 0-85.333333 85.333333 0 0 85.333333zM554.666667 597.333333l-85.333333 0 0-170.666667 85.333333 0 0 170.666667z",fill:"#ecc115","p-id":"3175","data-spm-anchor-id":"a313x.search_index.0.i0.2b3c3a81TUgFeH"})})," ",n.jsx("img",{src:"/assets/common/ticket.webp",alt:"logo",width:16,height:16})," will be reset at 8:00 AM (UTC+8) every day!"]}),n.jsxs("li",{children:[n.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3174","data-spm-anchor-id":"a313x.search_index.0.i5.2b3c3a81TUgFeH",width:"16",height:"16",children:n.jsx("path",{d:"M42.666667 896l938.666667 0-469.333333-810.666667-469.333333 810.666667zM554.666667 768l-85.333333 0 0-85.333333 85.333333 0 0 85.333333zM554.666667 597.333333l-85.333333 0 0-170.666667 85.333333 0 0 170.666667z",fill:"#ecc115","p-id":"3175","data-spm-anchor-id":"a313x.search_index.0.i0.2b3c3a81TUgFeH"})})," Harvest your ripe ",n.jsx("img",{src:"/assets/common/cat.webp",alt:"logo",width:16,height:16})," within 6 hours!"]})]})]})})]})}),n.jsx(j,{...J})]})},u=()=>n.jsxs("div",{className:"speed-wrapper",children:[n.jsx(v,{}),n.jsx(x,{}),n.jsx("div",{className:"dot",children:"."}),n.jsx(x,{}),n.jsx(x,{}),n.jsx(x,{}),n.jsx(x,{}),n.jsx("div",{className:"percent",children:"%"})]}),x=()=>{const[e,s]=r.useState(0),t=r.useRef(null);return r.useEffect((()=>{let e=0;return t.current=setInterval((()=>{e-=5*Math.random()+10,e<-450&&(e=0),s(e)}),20),()=>{clearInterval(t.current)}}),[]),n.jsx("div",{className:"ybpNumber-wrapper",children:n.jsx("div",{className:"rotate-wrapper",style:{transform:`translate(0, ${e}px)`},children:[0,1,2,3,4,5,6,7,8,9].map((e=>n.jsx("div",{className:"rotate-item",children:e},e)))})})},v=()=>{const[e,s]=r.useState(0),t=r.useRef(null);return r.useEffect((()=>{let e=0;return t.current=setInterval((()=>{e-=5*Math.random()+3,e<-100&&(e=0),s(e)}),20),()=>{clearInterval(t.current)}}),[]),n.jsx("div",{className:"ybpNumber-wrapper",children:n.jsx("div",{className:"rotate-wrapper",style:{transform:`translate(0, ${e}px)`},children:["/assets/home/up.png","/assets/home/right-arrow.png","/assets/home/down.png"].map((e=>n.jsx("div",{className:"rotate-item",children:n.jsx("img",{src:e,alt:"rr",className:"rotate-item-img"})},e)))})})},j=({percent:e,prePrice:s,curPrice:t,diff:r,visible:a,symbol:i,isRight:c})=>n.jsx(n.Fragment,{children:a?n.jsx("div",{className:"result-comp",children:n.jsxs("div",{className:"result-comp-content",children:[n.jsx("div",{className:"rcct-content",children:c?n.jsxs("div",{className:"rcct-miss",children:[n.jsx("img",{src:"/assets/home/success.png",className:"success"}),n.jsx("img",{src:"/assets/home/win.png",className:"miss"})]}):n.jsxs("div",{className:"rcct-miss",children:[n.jsx("img",{src:"/assets/home/fail.png",className:"fail"}),n.jsx("img",{src:"/assets/home/miss.png",className:"miss"})]})}),n.jsxs("div",{className:"rccb-content",children:[n.jsxs("div",{className:"rcc-desc",children:[n.jsxs("span",{children:[i," Price"]}),n.jsxs("span",{className:r>0?"rcc-win":r<0?"rcc-miss":"",children:[e,"%"]})]}),n.jsxs("div",{className:"rcc-detail",children:[n.jsx("span",{children:"From"})," $",s,n.jsx("span",{children:"To"})," $",t]})]})]})}):null}),g=({userInfo:s})=>{const a=t((e=>e.user.system)),[c,d]=r.useState(!1),[o,h]=r.useState("00:00"),p=e(),u=r.useRef(null);return r.useEffect((()=>{if(clearInterval(u.current),s.ticket<10){d(!0);let e=Math.floor(((new Date).getTime()-new Date(s.last_play_time).getTime())/1e3);e=a.recovery_time-e%a.recovery_time,h(m(e)),u.current=setInterval((()=>{0==e?(clearInterval(u.current),l().then((e=>{0==e.code&&p(i(e.data))}))):(e-=1,h(m(e)))}),1e3)}else d(!1);return()=>{clearInterval(u.current)}}),[s]),n.jsx(n.Fragment,{children:c?n.jsxs("div",{className:"recovery-comp",children:[n.jsx("div",{className:"recovery",children:"Gas Recovery Time:"}),n.jsx("div",{className:"count",children:o})]}):null})};export{p as HomePage,p as default};
