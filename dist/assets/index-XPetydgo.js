import{ak as e,r as t,al as n,am as r,X as o,$ as s,U as a,a1 as i,Y as l,a0 as c,q as u,j as d,E as m}from"./index-vXRN0nb0.js";import{b as f,u as p,l as v}from"./game-DqO2iwES.js";import{b as h}from"./bound-q8OY5ieV.js";import{a as g}from"./attach-properties-to-component-CClyKAqJ.js";var w={},x=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(w,"__esModule",{value:!0});var j=w.staged=void 0;const $=x(t);function b(e){return"function"==typeof e?$.default.createElement(y,{stage:e}):e}function y(e){return b(e.stage())}j=w.staged=function(e){return function(t,n){return b(e(t,n))}};const N="adm-space",k={direction:"horizontal"},E=e=>{const t=o(k,e),{direction:n,onClick:r}=t;return s(t,a.createElement("div",{className:i(N,{[`${N}-wrap`]:t.wrap,[`${N}-block`]:t.block,[`${N}-${n}`]:!0,[`${N}-align-${t.align}`]:!!t.align,[`${N}-justify-${t.justify}`]:!!t.justify}),onClick:r},a.Children.map(t.children,(e=>null!=e&&a.createElement("div",{className:`${N}-item`},e)))))},M="adm-page-indicator",C={color:"primary",direction:"horizontal"},S=t.memo((e=>{const t=o(C,e),n=[];for(let r=0;r<t.total;r++)n.push(a.createElement("div",{key:r,className:i(`${M}-dot`,{[`${M}-dot-active`]:t.current===r})}));return s(t,a.createElement("div",{className:i(M,`${M}-${t.direction}`,`${M}-color-${t.color}`)},n))})),z=e=>s(e,a.createElement("div",{className:"adm-swiper-item",onClick:e.onClick},e.children)),I="adm-swiper",O={mousedown:"onMouseDown",mousemove:"onMouseMove",mouseup:"onMouseUp"},P={defaultIndex:0,allowTouchMove:!0,autoplay:!1,autoplayInterval:3e3,loop:!1,direction:"horizontal",slideSize:100,trackOffset:0,stuckAtBoundary:!0,rubberband:!0,stopPropagation:[]};let T;function L(e,t){const n=e%t;return n<0?n+t:n}const R=g(t.forwardRef(j(((r,u)=>{const d=o(P,r),{direction:m,total:v,children:g,indicator:w}=d,[x]=t.useState({}),j=t.useRef(null),$="vertical"===m,b=d.slideSize/100,y=d.trackOffset/100,{validChildren:N,count:k,renderChildren:E}=t.useMemo((()=>{let e,t,n=0;return"function"==typeof g?e=g:t=a.Children.map(g,(e=>a.isValidElement(e)?e.type!==z?null:(n++,e):null)),{renderChildren:e,validChildren:t,count:n}}),[g]),M=null!=v?v:k;return 0===M||!N&&!E?null:()=>{let r=d.loop;b*(M-1)<1&&(r=!1);const o=t.useRef(null);function g(){const e=o.current;return e?($?e.offsetHeight:e.offsetWidth)*d.slideSize/100:0}const[k,C,z]=(P=d.defaultIndex,_=(R=e(t.useState(P),2))[0],B=R[1],A=n(_),[_,B,t.useCallback((function(){return A.current}),[])]);var P,R,_,B,A;const[D,H,U]=function(){const[e,n]=t.useState(!1),r=t.useRef(e);return t.useEffect((()=>{r.current=e}),[e]),[e,n,r]}();function q(e){let t=0,n=M-1;return d.stuckAtBoundary&&(t+=y/b,n-=(1-b-y)/b),h(e,t,n)}const[{position:F},V]=l((()=>({position:100*q(k),config:{tension:200,friction:30},onRest:()=>{if(U.current)return;if(!r)return;const e=F.get(),t=L(e,100*M);t!==e&&V.start({position:t,immediate:!0})}})),[M]),W=t.useRef(null),X=f((e=>{if(W.current=e.cancel,!e.intentional)return;if(e.first&&!T&&(T=x),T!==x)return;T=e.last?void 0:x;const t=g();if(!t)return;const n=$?1:0,r=e.offset[n],o=e.direction[n],s=e.velocity[n];if(H(!0),e.last){const e=Math.floor(r/t),n=e+1,a=Math.round((r+2e3*s*o)/t);Y(h(a,e,n)),window.setTimeout((()=>{H(!1)}))}else V.start({position:100*r/t,immediate:!0})}),{transform:([e,t])=>[-e,-t],from:()=>{const e=g();return[F.get()/100*e,F.get()/100*e]},triggerAllEvents:!0,bounds:()=>{if(r)return{};const e=g(),t=q(0)*e,n=q(M-1)*e;return $?{top:t,bottom:n}:{left:t,right:n}},rubberband:d.rubberband,axis:$?"y":"x",preventScroll:!$,pointer:{touch:!0}});function Y(e,t=!1){var n;const o=Math.round(e),s=r?L(o,M):h(o,0,M-1);s!==z()&&(null===(n=d.onIndexChange)||void 0===n||n.call(d,s)),C(s),V.start({position:100*(r?o:q(o)),immediate:t})}function G(){Y(Math.round(F.get()/100)+1)}function J(){Y(Math.round(F.get()/100)-1)}t.useImperativeHandle(u,(()=>({swipeTo:Y,swipeNext:G,swipePrev:J}))),p((()=>{const e=M-1;k>e&&Y(e,!0)}));const{autoplay:K,autoplayInterval:Q}=d,Z=()=>{j.current=window.setTimeout((()=>{"reverse"===K?J():G(),Z()}),Q)};function ee(e,t){let n={};return r&&(n={[$?"y":"x"]:F.to((t=>{let n=100*e-t;const r=100*M,o=r/2;return n=L(n+o,r)-o,`${n}%`})),[$?"top":"left"]:`-${100*e}%`}),a.createElement(c.div,{className:i(`${I}-slide`,{[`${I}-slide-active`]:k===e}),style:n,key:e},t)}function te(){if(E&&v){const e=2,t=Math.max(k-e,0),n=Math.min(k+e,v-1),r=[];for(let o=t;o<=n;o+=1)r.push(ee(o,E(o)));return a.createElement(a.Fragment,null,a.createElement("div",{className:`${I}-slide-placeholder`,style:{width:100*t+"%"}}),r)}return a.Children.map(N,((e,t)=>ee(t,e)))}t.useEffect((()=>{if(K&&!D)return Z(),()=>{j.current&&window.clearTimeout(j.current)}}),[K,Q,D,M]);const ne={"--slide-size":`${d.slideSize}%`,"--track-offset":`${d.trackOffset}%`},re=Object.assign({},d.allowTouchMove?X():{}),oe={};for(const e of d.stopPropagation)oe[O[e]]=function(e){e.stopPropagation()};const se=function(e,t){const n=Object.keys(e),r=Object.keys(t),o=new Set([...n,...r]),s={};return o.forEach((n=>{const r=e[n],o=t[n];s[n]="function"==typeof r&&"function"==typeof o?function(...e){r(...e),o(...e)}:r||o})),s}(re,oe);let ae=null;return"function"==typeof w?ae=w(M,k):!1!==w&&(ae=a.createElement("div",{className:`${I}-indicator`},a.createElement(S,Object.assign({},d.indicatorProps,{total:M,current:k,direction:m})))),s(d,a.createElement("div",{className:i(I,`${I}-${m}`),style:ne},a.createElement("div",Object.assign({ref:o,className:i(`${I}-track`,{[`${I}-track-allow-touch-move`]:d.allowTouchMove}),onClickCapture:e=>{U.current&&e.stopPropagation(),function(){var e;null===(e=W.current)||void 0===e||e.call(W),U.current=!1}()}},se),r?a.createElement("div",{className:`${I}-track-inner`},te()):a.createElement(c.div,{className:`${I}-track-inner`,style:{[$?"y":"x"]:F.to((e=>-e+"%"))}},te())),ae))}}))),{Item:z});function _(){const e=t.useRef(null),[n,r]=t.useState([]),o=u((e=>e.user.info)),s=m.getInstance(),[a,i]=t.useState(0),[l,c]=t.useState(1);t.useEffect((()=>{s.emit("loading",!0),v().then((e=>{if(s.emit("loading",!1),0==e.code){r(e.data);for(let t=0;t<e.data.length;t++)if(e.data[t].score>(null==o?void 0:o.score)){c(e.data[t].level);let n=0;0!=t&&(n=e.data[t-1].score);const r=(o.score-n)/(e.data[t].score-n)*100;i(r);break}}}))}),[]);const f=n.map(((t,r)=>d.jsx(R.Item,{children:d.jsxs("div",{className:"list-item",children:[d.jsxs("div",{className:"img-wrapper",children:[d.jsx("img",{src:"/assets/wallet/lv.png",alt:"lv"}),d.jsx("div",{className:"lv-num",children:t.level})]}),l==t.level?d.jsx("div",{className:"current",children:"Current driver level"}):null,d.jsx("div",{className:"label",children:t.name}),d.jsx("div",{className:"normal-score",children:r==n.length-1?d.jsxs("span",{children:[Number(t.score).toLocaleString(),"  points or more"]}):1==t.level?d.jsxs("span",{children:[Number(n[0].score).toLocaleString(),"  points or less"]}):d.jsxs("span",{children:[d.jsxs("span",{children:[Number(t.score).toLocaleString()," ~ "]}),Number(n[r+1].score).toLocaleString(),"  PTS"]})}),l==t.level?d.jsx("div",{className:"progress",children:d.jsx("div",{className:"percent",style:{width:`${a}%`}})}):null,d.jsx("svg",{onClick:()=>{var t;null==(t=e.current)||t.swipePrev()},viewBox:"0 0 1024 1024",className:"icon left",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4487",width:"32",height:"32",children:d.jsx("path",{d:"M512 64C264.8 64 64 264.8 64 512s200.8 448 448 448 448-200.8 448-448S759.2 64 512 64z m158.4 674.4L625.6 784l-272-272 272-272 45.6 45.6L444 512l226.4 226.4z","p-id":"4488",fill:"#cdcdcd"})}),d.jsx("svg",{onClick:()=>{var t;null==(t=e.current)||t.swipeNext()},viewBox:"0 0 1024 1024",className:"icon right",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2275",width:"32",height:"32",children:d.jsx("path",{d:"M512 64C264.8 64 64 264.8 64 512s200.8 448 448 448 448-200.8 448-448S759.2 64 512 64zM398.4 784l-45.6-45.6L580 512 353.6 285.6l45.6-45.6 272 272-272.8 272z","p-id":"2276",fill:"#cdcdcd"})})]})},r)));return d.jsx("div",{className:"level-page",children:d.jsx(E,{direction:"vertical",block:!0,children:d.jsx(R,{allowTouchMove:!1,ref:e,loop:!0,children:f})})})}export{_ as default};
